
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mypythontools_cicd.venvs.venvs_internal &#8212; Python 20-07-2022 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="https://malachov.github.io/mypythontools/tools/sphinx-alabaster-css/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for mypythontools_cicd.venvs.venvs_internal</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Module with functions for &#39;venvs&#39; subpackage.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sequence</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span> <span class="nn">mypythontools.paths</span> <span class="kn">import</span> <span class="n">PathLike</span><span class="p">,</span> <span class="n">is_path_free</span><span class="p">,</span> <span class="n">WslPath</span>
<span class="kn">from</span> <span class="nn">mypythontools.misc</span> <span class="kn">import</span> <span class="n">print_progress</span>
<span class="kn">from</span> <span class="nn">mypythontools.system</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">check_script_is_available</span><span class="p">,</span>
    <span class="n">get_console_str_with_quotes</span><span class="p">,</span>
    <span class="n">terminal_do_command</span><span class="p">,</span>
    <span class="n">SHELL_AND</span><span class="p">,</span>
    <span class="n">is_wsl</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">..project_paths</span> <span class="kn">import</span> <span class="n">PROJECT_PATHS</span>
<span class="kn">from</span> <span class="nn">..packages</span> <span class="kn">import</span> <span class="n">get_requirements</span>
<span class="kn">from</span> <span class="nn">mypythontools_cicd.project_paths</span> <span class="kn">import</span> <span class="n">PROJECT_PATHS</span>


<span class="k">class</span> <span class="nc">VenvNotFound</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;If some method called on non installed venv.&quot;&quot;&quot;</span>

    <span class="k">pass</span>


<div class="viewcode-block" id="Venv"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv">[docs]</a><span class="k">class</span> <span class="nc">Venv</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;You can create new venv or sync it&#39;s dependencies.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        venv_path(Path): Path of venv. E.g. `venv`</span>
<span class="sd">        with_wsl(bool, optional): If working with linux venv from linux.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from pathlib import Path</span>
<span class="sd">        &gt;&gt;&gt; from mypythontools.system import is_wsl</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; path = &quot;venv/doctest/3.10&quot; if platform.system() == &quot;Windows&quot; and not is_wsl() else &quot;venv/doctest/wsl-3.10&quot;</span>
<span class="sd">        &gt;&gt;&gt; venv = Venv(path)</span>
<span class="sd">        &gt;&gt;&gt; venv.create()  # If already exists, it&#39;s skipped</span>
<span class="sd">        &gt;&gt;&gt; venv.install_library(&quot;colorama==0.3.9&quot;)</span>
<span class="sd">        &gt;&gt;&gt; &quot;colorama==0.3.9&quot; in venv.list_packages()</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; venv.sync_requirements(verbosity=0, path=PROJECT_PATHS.root)  # There ia a 0.4.4 in requirements.txt</span>
<span class="sd">        &gt;&gt;&gt; &quot;colorama==0.4.4&quot; in venv.list_packages()</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; venv.remove()</span>
<span class="sd">        &gt;&gt;&gt; Path(path).exists()</span>
<span class="sd">        False</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">venv_path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span> <span class="n">with_wsl</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Init the venv class. To create or update it, you can call extra functions.</span>

<span class="sd">        Args:</span>
<span class="sd">            venv_path(PathLike): Path of venv. E.g. `venv`</span>
<span class="sd">            with_wsl(bool, optional): If working with linux venv from linux.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: No folder found on defined path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">venv_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">venv_path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">real_path</span> <span class="o">=</span> <span class="n">venv_path</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">venv_path_console_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">venv_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span> <span class="o">=</span> <span class="n">with_wsl</span>

        <span class="n">wsl</span> <span class="o">=</span> <span class="n">is_wsl</span><span class="p">()</span> <span class="ow">or</span> <span class="n">with_wsl</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span><span class="p">:</span> <span class="nb">str</span>
        <span class="sd">&quot;&quot;&quot;Path to the executables. Can be directly used in terminal. Some libraries cannot use</span>
<span class="sd">        ``python -m package`` syntax and therefore it can be called from scripts folder.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">wsl</span><span class="p">:</span>
            <span class="n">activate_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;Scripts&quot;</span> <span class="o">/</span> <span class="s2">&quot;activate.bat&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">installed</span> <span class="o">=</span> <span class="n">activate_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;Scripts&quot;</span> <span class="o">/</span> <span class="s2">&quot;python.exe&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;python -m venv </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path_console_str</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scripts_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;Scripts&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">activate_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">and</span> <span class="n">with_wsl</span><span class="p">:</span>
            <span class="n">venv_path</span> <span class="o">=</span> <span class="n">WslPath</span><span class="p">(</span><span class="n">venv_path</span><span class="p">)</span>
            <span class="n">activate_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;activate&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">installed</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;activate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;python&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;python3 -m venv </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path_console_str</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scripts_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;. </span><span class="si">{</span><span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">activate_path</span><span class="o">.</span><span class="n">wsl_path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">((</span><span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;python&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">wsl_path</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">activate_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;activate&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">installed</span> <span class="o">=</span> <span class="n">activate_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;python&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;python3 -m venv </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path_console_str</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scripts_path</span> <span class="o">=</span> <span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;. </span><span class="si">{</span><span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">activate_path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">((</span><span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;bin&quot;</span> <span class="o">/</span> <span class="s2">&quot;python&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span> <span class="o">=</span> <span class="n">venv_path</span>
        <span class="sd">&quot;&quot;&quot;Path to venv prefix, e.g. .../venv&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subprocess_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">SHELL_AND</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span><span class="si">}</span><span class="s2"> -m &quot;</span>
        <span class="sd">&quot;&quot;&quot;Run as module, so library can be directly call afterwards. Can be directly used in terminal. It can</span>
<span class="sd">        look like this for example::</span>
<span class="sd">        </span>
<span class="sd">            .../Scripts/activate.bat &amp;&amp; .../venv/Scripts/python.exe -m</span>
<span class="sd">        &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Venv.create"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create virtual environment. If it already exists, it will be skipped and nothing happens.</span>

<span class="sd">        Args:</span>
<span class="sd">            verbose (bool, optional): If True, result of terminal command will be printed to console.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">installed</span><span class="p">:</span>
            <span class="n">terminal_do_command</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_command</span><span class="p">,</span>
                <span class="n">cwd</span><span class="o">=</span><span class="n">PROJECT_PATHS</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
                <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                <span class="n">error_header</span><span class="o">=</span><span class="s2">&quot;Venv creation failed&quot;</span><span class="p">,</span>
                <span class="n">with_wsl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">installed</span> <span class="o">=</span> <span class="kc">True</span></div>

    <span class="c1"># TODO add &quot;find_requirements.txt&quot; to literal to find and install it when in requirements/requirements.txt</span>
<div class="viewcode-block" id="Venv.sync_requirements"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.sync_requirements">[docs]</a>    <span class="k">def</span> <span class="nf">sync_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">requirements_files</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;infer&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">PathLike</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;infer&quot;</span><span class="p">,</span>
        <span class="n">requirements</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verbosity</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">=</span> <span class="n">PROJECT_PATHS</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Sync libraries based on requirements. Install missing, remove unnecessary.</span>

<span class="sd">        Args:</span>
<span class="sd">            requirements_files (Literal[&quot;infer&quot;] | PathLike | Sequence[PathLike], optional): Define what libraries</span>
<span class="sd">                will be installed. If &quot;infer&quot;, autodetected. Can also be a list of more files e.g</span>
<span class="sd">                `[&quot;requirements.txt&quot;, &quot;requirements_dev.txt&quot;]`. Defaults to &quot;infer&quot;.</span>
<span class="sd">            requirements (list[str], optional): List of requirements. Defaults to None.</span>
<span class="sd">            verbosity (Literal[0, 1, 2], optional): If 0, prints nothing, if 1, then one line description of</span>
<span class="sd">                what happened is printed. If 3, all the results from terminal are printed. Defaults to 1.</span>
<span class="sd">            path (PathLike, optional): If using just names or relative path, and not found, define the root.</span>
<span class="sd">                It&#39;s also necessary when using another referenced files. If inferring files, it&#39;s used to</span>
<span class="sd">                search. Defaults to PROJECT_PATHS.root.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">print_progress</span><span class="p">(</span><span class="s2">&quot;Syncing requirements&quot;</span><span class="p">,</span> <span class="n">verbosity</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_not_installed</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">install_library</span><span class="p">(</span><span class="s2">&quot;pip-tools&quot;</span><span class="p">)</span>

        <span class="n">requirements_all</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">requirements_files</span><span class="p">:</span>
            <span class="n">requirements_all</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">get_requirements</span><span class="p">(</span><span class="n">requirements_files</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">requirements</span><span class="p">:</span>
            <span class="n">requirements_all</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span>

        <span class="n">requirements_all_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;requirements_all.in&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span><span class="p">,</span> <span class="n">WslPath</span><span class="p">):</span>
            <span class="n">requirements_all_console_path_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">requirements_all_path</span><span class="o">.</span><span class="n">wsl_path</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="n">freezed_requirements_console_path_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;requirements.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">wsl_path</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">freezed_requirements_console_path_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span> <span class="o">/</span> <span class="s2">&quot;requirements.txt&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">requirements_all_console_path_str</span> <span class="o">=</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="n">requirements_all_path</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">requirements_all_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">requirement_libraries</span><span class="p">:</span>
            <span class="n">requirement_libraries</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">requirements_all</span><span class="p">))</span>

        <span class="n">pip_compile_command</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;pip-compile </span><span class="si">{</span><span class="n">requirements_all_console_path_str</span><span class="si">}</span><span class="s2"> --output-file &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">freezed_requirements_console_path_str</span><span class="si">}</span><span class="s2"> --quiet&quot;</span>
        <span class="p">)</span>

        <span class="n">pip_sync_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pip-sync </span><span class="si">{</span><span class="n">freezed_requirements_console_path_str</span><span class="si">}</span><span class="s2"> --quiet&quot;</span>
        <span class="n">sync_commands</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">pip_compile_command</span><span class="p">:</span> <span class="s2">&quot;Creating joined requirements.txt file failed.&quot;</span><span class="p">,</span>
            <span class="n">pip_sync_command</span><span class="p">:</span> <span class="s2">&quot;Requirements syncing failed.&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">sync_commands</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">terminal_do_command</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">SHELL_AND</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">error_header</span><span class="o">=</span><span class="n">j</span><span class="p">,</span>
                <span class="n">with_wsl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span><span class="p">,</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="Venv.list_packages"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.list_packages">[docs]</a>    <span class="k">def</span> <span class="nf">list_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get list of installed libraries in the venv.</span>

<span class="sd">        The reason why it&#39;s meta coded via string parsing and not parsed directly is that it needs to be</span>
<span class="sd">        available from other venv as well.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_not_installed</span><span class="p">()</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">terminal_do_command</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">SHELL_AND</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span><span class="si">}</span><span class="s2"> -m pip freeze&quot;</span><span class="p">,</span>
            <span class="n">with_wsl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Venv.install_library"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.install_library">[docs]</a>    <span class="k">def</span> <span class="nf">install_library</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">upgrade</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">PathLike</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Install package to venv with pip install.</span>

<span class="sd">        You can use extras with square brackets.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of installed library.</span>
<span class="sd">            verbose (bool, optional): If True, result of terminal command will be printed to console.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            upgrade (bool, optional): Update flag. If True, then latest is installed. If False, and already</span>
<span class="sd">                exists, it&#39;s skipped. Defaults to False</span>
<span class="sd">            path (None | Pathlike, optional): If installing from local path, this is path from where you can use</span>
<span class="sd">                relative paths. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_not_installed</span><span class="p">()</span>

        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">SHELL_AND</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span><span class="si">}</span><span class="s2"> -m pip install </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;--upgrade&#39;</span> <span class="k">if</span> <span class="n">upgrade</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">terminal_do_command</span><span class="p">(</span>
            <span class="n">command</span><span class="p">,</span>
            <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
            <span class="n">error_header</span><span class="o">=</span><span class="s2">&quot;Library installation failed.&quot;</span><span class="p">,</span>
            <span class="n">with_wsl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span><span class="p">,</span>
            <span class="n">cwd</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Venv.uninstall_library"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.uninstall_library">[docs]</a>    <span class="k">def</span> <span class="nf">uninstall_library</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Uninstall package to venv with pip install.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of library to uninstall.</span>
<span class="sd">            verbose (bool, optional): If True, result of terminal command will be printed to console.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_not_installed</span><span class="p">()</span>

        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">SHELL_AND</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">executable_str</span><span class="si">}</span><span class="s2"> -m pip uninstall </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">terminal_do_command</span><span class="p">(</span>
            <span class="n">command</span><span class="p">,</span>
            <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
            <span class="n">error_header</span><span class="o">=</span><span class="s2">&quot;Library removal failed&quot;</span><span class="p">,</span>
            <span class="n">with_wsl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_wsl</span><span class="p">,</span>
            <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Venv.remove"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Remove the folder with venv.&quot;&quot;&quot;</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">venv_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span></div>

<div class="viewcode-block" id="Venv.get_script_path"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.Venv.get_script_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_script_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get script path such as pip for example.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_wsl</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scripts_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.exe&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">get_console_str_with_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scripts_path</span> <span class="o">/</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_raise_if_not_installed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">installed</span><span class="p">:</span>

            <span class="k">raise</span> <span class="n">VenvNotFound</span><span class="p">(</span><span class="s2">&quot;Installed venv not found, first create it with &#39;create&#39; or create multiple.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="is_venv"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.is_venv">[docs]</a><span class="k">def</span> <span class="nf">is_venv</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;True if run in venv, False if run in main interpreter directly.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">base_prefix</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">prefix</span><span class="p">)</span></div>


<div class="viewcode-block" id="prepare_venvs"><a class="viewcode-back" href="../../../mypythontools_cicd.venvs.html#mypythontools_cicd.venvs.prepare_venvs">[docs]</a><span class="k">def</span> <span class="nf">prepare_venvs</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">PathLike</span> <span class="o">=</span> <span class="s2">&quot;venv&quot;</span><span class="p">,</span>
    <span class="n">versions</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;3.7&quot;</span><span class="p">,</span> <span class="s2">&quot;3.10&quot;</span><span class="p">,</span> <span class="s2">&quot;wsl-3.7&quot;</span><span class="p">,</span> <span class="s2">&quot;wsl-3.10&quot;</span><span class="p">],</span>
    <span class="n">verbosity</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This will install virtual environments with defined versions.</span>

<span class="sd">    Installation will be skipped if there is already existing folder with content. It is possible tu use wsl</span>
<span class="sd">    on windows. You have to install python launcher when using linux or wsl. More about python-launcher</span>
<span class="sd">    https://github.com/brettcannon/python-launcher</span>

<span class="sd">    Args:</span>
<span class="sd">        path (None | PathLike): Where venvs will be stored. If None, cwd() will be used. Defaults to &quot;venv&quot;.</span>
<span class="sd">        versions (Sequence[str], optional): List of used versions. If you want to use wsl, add `wsl-` prefix</span>
<span class="sd">            like for example `wsl-3.7`. Defaults to [&quot;3.7&quot;, &quot;3.10&quot;, &quot;wsl-3.7&quot;, &quot;wsl-3.10&quot;].</span>
<span class="sd">        verbosity (Literal[0, 1, 2], optional): If 0, prints nothing, if 1, then one line description of what</span>
<span class="sd">            happened is printed. If 3, all the results from terminal are printed. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">print_progress</span><span class="p">(</span><span class="s2">&quot;Preparing venvs&quot;</span><span class="p">,</span> <span class="n">verbosity</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">versions</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;versions&#39; param has to be list.&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">versions</span><span class="p">:</span>
        <span class="n">venv_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;wsl-&quot;</span><span class="p">):</span>
            <span class="n">wsl</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">version</span> <span class="o">=</span> <span class="n">version</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>  <span class="c1"># remove &quot;wsl-&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wsl</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_path_free</span><span class="p">(</span><span class="n">venv_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Venv</span><span class="p">(</span><span class="n">venv_path</span><span class="p">,</span> <span class="n">with_wsl</span><span class="o">=</span><span class="n">wsl</span><span class="p">)</span><span class="o">.</span><span class="n">installed</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;There is not empty folder on defined path &#39;</span><span class="si">{</span><span class="n">venv_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; and existing &quot;</span>
                    <span class="s2">&quot;virtualenv for current OS not detected there. Clean it first or check the settings &quot;</span>
                    <span class="s2">&quot;whether it should be an wsl venv.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">wsl</span><span class="p">:</span>
            <span class="n">check_script_is_available</span><span class="p">(</span>
                <span class="s2">&quot;wsl py&quot;</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="p">(</span>
                    <span class="s2">&quot;Verify whether python launcher is installed. If not, install it from &quot;</span>
                    <span class="s2">&quot;https://github.com/brettcannon/python-launcher . </span><span class="se">\n</span><span class="s2"> If it&#39;s installed in &quot;</span>
                    <span class="s2">&quot;&#39;/home/linuxbrew/.linuxbrew/bin/py&#39; it will be not visible from wsl. &quot;</span>
                    <span class="s2">&quot;You can use /usr/local/...&quot;</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="n">create_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;py -</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> -m venv </span><span class="si">{</span><span class="n">venv_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">terminal_do_command</span><span class="p">(</span>
            <span class="n">create_command</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">error_header</span><span class="o">=</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Creating virtual environment for</span><span class="si">{</span><span class="s1">&#39; wsl &#39;</span> <span class="k">if</span> <span class="n">wsl</span> <span class="k">else</span> <span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> failed. &quot;</span>
                <span class="s2">&quot;If fails with wsl, try to install &#39;python3.x-venv&#39; on wsl.&quot;</span>
            <span class="p">),</span>
            <span class="n">with_wsl</span><span class="o">=</span><span class="n">wsl</span><span class="p">,</span>
        <span class="p">)</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div id="logo">
    <a href="/">
        <img src="_static/logo.png" alt="Logo">
    </a>
</div>

<div class="section" id="table-of-contents">

    <h1>Table of content</h1>

    <ul>
        <li><a href="mypythontools_cicd.build_app.html">build_app</a></li>
        <li><a href="mypythontools_cicd.cicd.html">cicd</a></li>
        <li><a href="mypythontools_cicd.deploy.html">deploy</a></li>
        <li><a href="mypythontools_cicd.docs.html">docs</a></li>
        <li><a href="mypythontools_cicd.git.html">git</a></li>
        <li><a href="mypythontools_cicd.misc.html">misc</a></li>
        <li><a href="mypythontools_cicd.packages.html">packages</a></li>
        <li><a href="mypythontools_cicd.project_paths.html">project_paths</a></li>
        <li><a href="mypythontools_cicd.tests.html">tests</a></li>
        <li><a href="mypythontools_cicd.venvs.html">venvs</a></li>
    </ul>

    <h2><a href="/genindex.html">Index</a></h2>

</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Daniel Malachov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    
    <a href="https://github.com/Malachov/mypythontools_cicd" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>